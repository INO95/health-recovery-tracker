# [개발일지] OCR 운동기록 서비스 고도화: Cloudflare 배포, 리커버리 개선, 맨몸운동 계산

오늘은 운동 기록 서비스의 실제 사용성을 끌어올리는 데 집중했습니다. 핵심은 세 가지였습니다.

1. 외부에서 바로 접속 가능한 배포 환경 정리
2. OCR/AI 정리 결과의 신뢰도 개선
3. 리커버리 계산을 실제 운동 방식(맨몸/중량)과 맞추기

## 1) Cloudflare 기반 실서비스 배포
- Workers(D1 + R2) 기반 API 배포
- Pages 기반 프론트 배포
- 모바일에서 바로 접속 가능한 URL 확보

## 2) OCR 정리 파이프라인 개선
OCR 결과의 노이즈 때문에 세트 누락, 날짜 누락, 운동명 오인식이 자주 발생했습니다.

개선 포인트:
- 파서 안정화 및 경고 체계 정비
- 운동명 alias override 기능 추가(사용자가 직접 교정 가능)
- 업로드 실패/검증 실패 사유를 명확히 노출

## 3) 리커버리 모델 현실화
기존에는 단순/고정적인 계산이어서 "내일 해도 되나?" 판단이 모호했습니다.

이번 변경:
- 부위별 기본 회복시간 적용
  - 대근육/중대근육: 60시간
  - 소근육/기타: 36시간
  - 유산소: 24시간
- 사용자 설정 가능(부위별 회복시간, 체중)
- 남은 회복시간 및 다음 운동 가능 시각 제공

## 4) 풀업(맨몸/중량) 계산 개선
가장 중요한 수정 중 하나였습니다.

- 맨몸 풀업: `체중 × 반복수`
- 중량 풀업: `(체중 + 추가중량) × 반복수`

즉, 무게 입력이 없더라도 기본 체중(70kg)으로 정상 계산되고,
중량을 넣으면 자동으로 합산되어 볼륨/피로도에 반영됩니다.

## 5) 세션 편집 기능 강화
- 세션 수정/삭제/초기화/복제
- 운동 시작시각(`started_at`) 반영
- 리커버리 계산이 실제 운동 시점 기준으로 동작

## 마무리
이번 작업으로 "OCR로 기록은 되는데, 해석이 애매한" 상태에서
"수정 가능하고 판단 가능한" 상태로 넘어왔습니다.

다음 단계는 개인화 정밀도(운동 숙련도/루틴 패턴 기반 자동 튜닝) 강화입니다.
